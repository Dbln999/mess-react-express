{"ast":null,"code":"import _regeneratorRuntime from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Container,Row,InputGroup,Form,Button,Modal}from\"react-bootstrap\";import{useHttp}from\"../hooks/http.hook\";import{Messages}from\"./Messages\";import{QueryClientProvider,QueryClient}from\"react-query\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var queryClient=new QueryClient();export var MessagePage=function MessagePage(){var queryClient=new QueryClient();var _useHttp=useHttp(),request=_useHttp.request;var d=new Date();var _useState=useState({title:\"\",user:\"\",date:d.toLocaleTimeString(\"en-US\",{hour12:false})}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),disable=_useState6[0],setDisable=_useState6[1];var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var addMessageHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{data=request(\"/chat/new\",\"POST\",_objectSpread({},form));setForm({title:\"\",user:form.user,date:d.toLocaleTimeString(\"en-US\",{hour12:false})});}catch(e){console.log(e);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function addMessageHandler(){return _ref.apply(this,arguments);};}();var handleDisabled=function handleDisabled(){if(form.user!==\"\"){setDisable(false);}};useEffect(function(){handleDisabled();},[form.user,handleDisabled]);var hide=function hide(){return setShow(false);};return/*#__PURE__*/_jsx(QueryClientProvider,{client:queryClient,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-light h1 text-center mb-5\",children:\"ANONYMOUS CHAT\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:hide,children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Enter username\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(InputGroup,{className:\"\",children:/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Enter username\",\"aria-label\":\"title\",name:\"user\",\"aria-describedby\":\"basic-addon2\",value:form.user,onChange:changeHandler})})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:hide,disabled:disable,children:\"Save changes\"})})]}),/*#__PURE__*/_jsxs(Container,{md:\"10\",children:[/*#__PURE__*/_jsx(Row,{md:\"10\",className:\"d-flex flex-column\",children:/*#__PURE__*/_jsx(Messages,{form:form})}),/*#__PURE__*/_jsx(Row,{className:\"d-flex flex-row position-fixed bottom-0 w-75 mb-1\",children:/*#__PURE__*/_jsxs(InputGroup,{className:\"formCont\",children:[/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Enter message\",\"aria-label\":\"title\",name:\"title\",\"aria-describedby\":\"basic-addon2\",value:form.title,onChange:changeHandler}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"mx\",onClick:addMessageHandler,children:\"Enter\"})]})})]})]})});};","map":{"version":3,"names":["React","useEffect","useState","Container","Row","InputGroup","Form","Button","Modal","useHttp","Messages","QueryClientProvider","QueryClient","queryClient","MessagePage","request","d","Date","title","user","date","toLocaleTimeString","hour12","form","setForm","show","setShow","disable","setDisable","changeHandler","event","target","name","value","addMessageHandler","data","e","console","log","handleDisabled","hide"],"sources":["C:/react/express/messanger/client/src/pages/MessagePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  Container,\n  Row,\n  InputGroup,\n  Form,\n  Button,\n  Modal,\n} from \"react-bootstrap\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { Messages } from \"./Messages\";\nimport { QueryClientProvider, QueryClient } from \"react-query\";\nconst queryClient = new QueryClient();\n\nexport const MessagePage = () => {\n  const queryClient = new QueryClient();\n  const { request } = useHttp();\n  const d = new Date();\n  const [form, setForm] = useState({\n    title: \"\",\n    user: \"\",\n    date: d.toLocaleTimeString(\"en-US\", { hour12: false }),\n  });\n  const [show, setShow] = useState(true);\n  const [disable, setDisable] = useState(true);\n\n  const changeHandler = (event) => {\n    setForm({ ...form, [event.target.name]: event.target.value });\n  };\n\n\n  const addMessageHandler = async () => {\n    try {\n      const data = request(\"/chat/new\", \"POST\", { ...form });\n      setForm({\n        title: \"\",\n        user: form.user,\n        date: d.toLocaleTimeString(\"en-US\", { hour12: false }),\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleDisabled = () => {\n    if (form.user !== \"\") {\n      setDisable(false);\n    }\n  };\n\n  useEffect(() => {\n    handleDisabled();\n  }, [form.user, handleDisabled]);\n\n  const hide = () => setShow(false);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <div className=\"bg-dark\">\n        <div className=\"text-light h1 text-center mb-5\">ANONYMOUS CHAT</div>\n        <Modal show={show} onHide={hide}>\n          <Modal.Header>\n            <Modal.Title>Enter username</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <InputGroup className=\"\">\n              <Form.Control\n                placeholder=\"Enter username\"\n                aria-label=\"title\"\n                name=\"user\"\n                aria-describedby=\"basic-addon2\"\n                value={form.user}\n                onChange={changeHandler}\n              />\n            </InputGroup>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"primary\" onClick={hide} disabled={disable}>\n              Save changes\n            </Button>\n          </Modal.Footer>\n        </Modal>\n        <Container md={\"10\"}>\n          <Row md=\"10\" className=\"d-flex flex-column\">\n            <Messages form={form}></Messages>\n          </Row>\n          <Row className=\"d-flex flex-row position-fixed bottom-0 w-75 mb-1\">\n            <InputGroup className={\"formCont\"}>\n              <Form.Control\n                placeholder=\"Enter message\"\n                aria-label=\"title\"\n                name=\"title\"\n                aria-describedby=\"basic-addon2\"\n                value={form.title}\n                onChange={changeHandler}\n              />\n              <Button\n                variant=\"primary\"\n                className=\"mx\"\n                onClick={addMessageHandler}\n              >\n                Enter\n              </Button>\n            </InputGroup>\n          </Row>\n        </Container>\n      </div>\n    </QueryClientProvider>\n  );\n};\n"],"mappings":"omBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OACEC,SADF,CAEEC,GAFF,CAGEC,UAHF,CAIEC,IAJF,CAKEC,MALF,CAMEC,KANF,KAOO,iBAPP,CAQA,OAASC,OAAT,KAAwB,oBAAxB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,OAASC,mBAAT,CAA8BC,WAA9B,KAAiD,aAAjD,C,wFACA,GAAMC,YAAW,CAAG,GAAID,YAAJ,EAApB,CAEA,MAAO,IAAME,YAAW,CAAG,QAAdA,YAAc,EAAM,CAC/B,GAAMD,YAAW,CAAG,GAAID,YAAJ,EAApB,CACA,aAAoBH,OAAO,EAA3B,CAAQM,OAAR,UAAQA,OAAR,CACA,GAAMC,EAAC,CAAG,GAAIC,KAAJ,EAAV,CACA,cAAwBf,QAAQ,CAAC,CAC/BgB,KAAK,CAAE,EADwB,CAE/BC,IAAI,CAAE,EAFyB,CAG/BC,IAAI,CAAEJ,CAAC,CAACK,kBAAF,CAAqB,OAArB,CAA8B,CAAEC,MAAM,CAAE,KAAV,CAA9B,CAHyB,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAKA,eAAwBtB,QAAQ,CAAC,IAAD,CAAhC,yCAAOuB,IAAP,eAAaC,OAAb,eACA,eAA8BxB,QAAQ,CAAC,IAAD,CAAtC,yCAAOyB,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAW,CAC/BN,OAAO,gCAAMD,IAAN,wBAAaO,KAAK,CAACC,MAAN,CAAaC,IAA1B,CAAiCF,KAAK,CAACC,MAAN,CAAaE,KAA9C,GAAP,CACD,CAFD,CAKA,GAAMC,kBAAiB,4FAAG,8IACxB,GAAI,CACIC,IADJ,CACWpB,OAAO,CAAC,WAAD,CAAc,MAAd,kBAA2BQ,IAA3B,EADlB,CAEFC,OAAO,CAAC,CACNN,KAAK,CAAE,EADD,CAENC,IAAI,CAAEI,IAAI,CAACJ,IAFL,CAGNC,IAAI,CAAEJ,CAAC,CAACK,kBAAF,CAAqB,OAArB,CAA8B,CAAEC,MAAM,CAAE,KAAV,CAA9B,CAHA,CAAD,CAAP,CAKD,CAAC,MAAOc,CAAP,CAAU,CACVC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACD,CAVuB,sDAAH,kBAAjBF,kBAAiB,0CAAvB,CAaA,GAAMK,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,GAAIhB,IAAI,CAACJ,IAAL,GAAc,EAAlB,CAAsB,CACpBS,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAJD,CAMA3B,SAAS,CAAC,UAAM,CACdsC,cAAc,GACf,CAFQ,CAEN,CAAChB,IAAI,CAACJ,IAAN,CAAYoB,cAAZ,CAFM,CAAT,CAIA,GAAMC,KAAI,CAAG,QAAPA,KAAO,SAAMd,QAAO,CAAC,KAAD,CAAb,EAAb,CAEA,mBACE,KAAC,mBAAD,EAAqB,MAAM,CAAEb,WAA7B,uBACE,aAAK,SAAS,CAAC,SAAf,wBACE,YAAK,SAAS,CAAC,gCAAf,4BADF,cAEE,MAAC,KAAD,EAAO,IAAI,CAAEY,IAAb,CAAmB,MAAM,CAAEe,IAA3B,wBACE,KAAC,KAAD,CAAO,MAAP,wBACE,KAAC,KAAD,CAAO,KAAP,6BADF,EADF,cAIE,KAAC,KAAD,CAAO,IAAP,wBACE,KAAC,UAAD,EAAY,SAAS,CAAC,EAAtB,uBACE,KAAC,IAAD,CAAM,OAAN,EACE,WAAW,CAAC,gBADd,CAEE,aAAW,OAFb,CAGE,IAAI,CAAC,MAHP,CAIE,mBAAiB,cAJnB,CAKE,KAAK,CAAEjB,IAAI,CAACJ,IALd,CAME,QAAQ,CAAEU,aANZ,EADF,EADF,EAJF,cAgBE,KAAC,KAAD,CAAO,MAAP,wBACE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAEW,IAAnC,CAAyC,QAAQ,CAAEb,OAAnD,0BADF,EAhBF,GAFF,cAwBE,MAAC,SAAD,EAAW,EAAE,CAAE,IAAf,wBACE,KAAC,GAAD,EAAK,EAAE,CAAC,IAAR,CAAa,SAAS,CAAC,oBAAvB,uBACE,KAAC,QAAD,EAAU,IAAI,CAAEJ,IAAhB,EADF,EADF,cAIE,KAAC,GAAD,EAAK,SAAS,CAAC,mDAAf,uBACE,MAAC,UAAD,EAAY,SAAS,CAAE,UAAvB,wBACE,KAAC,IAAD,CAAM,OAAN,EACE,WAAW,CAAC,eADd,CAEE,aAAW,OAFb,CAGE,IAAI,CAAC,OAHP,CAIE,mBAAiB,cAJnB,CAKE,KAAK,CAAEA,IAAI,CAACL,KALd,CAME,QAAQ,CAAEW,aANZ,EADF,cASE,KAAC,MAAD,EACE,OAAO,CAAC,SADV,CAEE,SAAS,CAAC,IAFZ,CAGE,OAAO,CAAEK,iBAHX,mBATF,GADF,EAJF,GAxBF,GADF,EADF,CAqDD,CA/FM"},"metadata":{},"sourceType":"module"}