{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\express\\\\messanger\\\\client\\\\src\\\\pages\\\\MessagePage.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { Container, Row, InputGroup, Form, Button, Modal } from \"react-bootstrap\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { Messages } from \"./Messages\";\nimport axios from \"axios\";\nimport { useQuery, QueryClient, QueryClientProvider } from \"react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MessagePage = () => {\n  _s2();\n\n  var _s = $RefreshSig$(),\n      _mess$data;\n\n  const queryClient = new QueryClient();\n  const {\n    request\n  } = useHttp();\n  const d = new Date();\n  const [form, setForm] = useState({\n    title: \"\",\n    user: \"\",\n    date: d.toLocaleTimeString(\"en-US\", {\n      hour12: false\n    })\n  });\n  const [show, setShow] = useState(true);\n  const [disable, setDisable] = useState(true);\n  const [mess, setMess] = useState([]);\n\n  const changeHandler = event => {\n    setForm({ ...form,\n      [event.target.name]: event.target.value\n    });\n    console.log(form);\n  };\n\n  const UserMessages = () => {\n    _s();\n\n    const {\n      isLoading,\n      data\n    } = useQuery(\"info\", async () => {\n      const {\n        data\n      } = axios.get(\"/chat/get\");\n      console.log(data);\n      return data;\n    }, {\n      refetchInterval: 2000\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 30\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 50\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, this);\n  };\n\n  _s(UserMessages, \"3/UYpjJNObciauUid8uIQ//UcYY=\", false, function () {\n    return [useQuery];\n  });\n\n  const addMessageHandler = async () => {\n    try {\n      const data = request(\"/chat/new\", \"POST\", { ...form\n      });\n      setForm({\n        title: \"\"\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleDisabled = () => {\n    if (form.user !== \"\") {\n      setDisable(false);\n    }\n  };\n\n  useEffect(() => {\n    handleDisabled();\n  }, [form.user]);\n\n  const hide = () => setShow(false);\n\n  return /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n    client: queryClient,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-dark\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-light h1 text-center mb-5\",\n        children: \"ANONYMOUS CHAT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: show,\n        onHide: hide,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Enter username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            className: \"\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"Enter username\",\n              \"aria-label\": \"title\",\n              name: \"user\",\n              \"aria-describedby\": \"basic-addon2\",\n              value: form.user,\n              onChange: changeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: hide,\n            disabled: disable,\n            children: \"Save changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        md: \"10\",\n        children: [/*#__PURE__*/_jsxDEV(UserMessages, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          md: \"10\",\n          className: \"d-flex flex-column\",\n          children: (_mess$data = mess.data) === null || _mess$data === void 0 ? void 0 : _mess$data.map(msg => {\n            return /*#__PURE__*/_jsxDEV(Messages, {\n              form: form,\n              messages: msg\n            }, msg._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 22\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"d-flex flex-row position-fixed bottom-0 w-75 mb-1\",\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            className: \"formCont\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"Enter message\",\n              \"aria-label\": \"title\",\n              name: \"title\",\n              \"aria-describedby\": \"basic-addon2\",\n              value: form.title,\n              onChange: changeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              className: \"mx\",\n              onClick: addMessageHandler,\n              children: \"Enter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(MessagePage, \"OI7glVCnNMkikOiMPDCFznPvUh8=\", false, function () {\n  return [useHttp];\n});\n\n_c = MessagePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MessagePage\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","Container","Row","InputGroup","Form","Button","Modal","useHttp","Messages","axios","useQuery","QueryClient","QueryClientProvider","MessagePage","queryClient","request","d","Date","form","setForm","title","user","date","toLocaleTimeString","hour12","show","setShow","disable","setDisable","mess","setMess","changeHandler","event","target","name","value","console","log","UserMessages","isLoading","data","get","refetchInterval","addMessageHandler","e","handleDisabled","hide","map","msg","_id"],"sources":["C:/react/express/messanger/client/src/pages/MessagePage.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  Container,\n  Row,\n  InputGroup,\n  Form,\n  Button,\n  Modal,\n} from \"react-bootstrap\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { Messages } from \"./Messages\";\nimport axios from \"axios\";\nimport { useQuery, QueryClient, QueryClientProvider } from \"react-query\";\n\nexport const MessagePage = () => {\n  const queryClient = new QueryClient();\n  const { request } = useHttp();\n  const d = new Date();\n  const [form, setForm] = useState({\n    title: \"\",\n    user: \"\",\n    date: d.toLocaleTimeString(\"en-US\", { hour12: false }),\n  });\n  const [show, setShow] = useState(true);\n  const [disable, setDisable] = useState(true);\n  const [mess, setMess] = useState([]);\n\n  const changeHandler = (event) => {\n    setForm({ ...form, [event.target.name]: event.target.value });\n    console.log(form);\n  };\n  \n\n  const UserMessages = () => {\n    const { isLoading, data } = useQuery(\n      \"info\",\n      async () => {\n        const { data } =  axios.get(\"/chat/get\");\n        console.log(data)\n        return data;\n      },\n      {\n        refetchInterval: 2000,\n      }\n    );\n    return <div>{isLoading ? <p>loading...</p> : <p>{data}</p>}</div>;\n  };\n\n  const addMessageHandler = async () => {\n    try {\n      const data = request(\"/chat/new\", \"POST\", { ...form });\n      setForm({ title: \"\" });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleDisabled = () => {\n    if (form.user !== \"\") {\n      setDisable(false);\n    }\n  };\n\n  useEffect(() => {\n    handleDisabled();\n  }, [form.user]);\n\n  const hide = () => setShow(false);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <div className=\"bg-dark\">\n        <div className=\"text-light h1 text-center mb-5\">ANONYMOUS CHAT</div>\n        <Modal show={show} onHide={hide}>\n          <Modal.Header>\n            <Modal.Title>Enter username</Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body>\n            <InputGroup className=\"\">\n              <Form.Control\n                placeholder=\"Enter username\"\n                aria-label=\"title\"\n                name=\"user\"\n                aria-describedby=\"basic-addon2\"\n                value={form.user}\n                onChange={changeHandler}\n              />\n            </InputGroup>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"primary\" onClick={hide} disabled={disable}>\n              Save changes\n            </Button>\n          </Modal.Footer>\n        </Modal>\n        <Container md={\"10\"}>\n          <UserMessages />\n\n          <Row md=\"10\" className=\"d-flex flex-column\">\n            {mess.data?.map((msg) => {\n              return <Messages key={msg._id} form={form} messages={msg} />;\n            })}\n          </Row>\n          <Row className=\"d-flex flex-row position-fixed bottom-0 w-75 mb-1\">\n            <InputGroup className={\"formCont\"}>\n              <Form.Control\n                placeholder=\"Enter message\"\n                aria-label=\"title\"\n                name=\"title\"\n                aria-describedby=\"basic-addon2\"\n                value={form.title}\n                onChange={changeHandler}\n              />\n              <Button\n                variant=\"primary\"\n                className=\"mx\"\n                onClick={addMessageHandler}\n              >\n                Enter\n              </Button>\n            </InputGroup>\n          </Row>\n        </Container>\n      </div>\n    </QueryClientProvider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}