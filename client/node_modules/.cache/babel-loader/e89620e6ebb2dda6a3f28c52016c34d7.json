{"ast":null,"code":"import _regeneratorRuntime from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/react/express/messanger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from\"react\";export var useHttp=function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,response,data,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:\"GET\";body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{};setLoading(true);_context.prev=4;if(body){body=JSON.stringify(body);headers[\"Content-Type\"]=\"application/JSON\";}_context.next=8;return fetch(url,{method:method,body:body,headers:headers});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;if(response.ok){_context.next=14;break;}throw new Error(data.message||\"Something went wrong\");case 14:setLoading(false);return _context.abrupt(\"return\",data);case 18:_context.prev=18;_context.t0=_context[\"catch\"](4);setLoading(false);setError(_context.t0.message);throw _context.t0;case 23:case\"end\":return _context.stop();}}},_callee,null,[[4,18]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=useCallback(function(){return setError(null);},[]);return{loading:loading,request:request,error:error,clearError:clearError};};","map":{"version":3,"names":["useState","useCallback","useHttp","loading","setLoading","error","setError","request","url","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError"],"sources":["C:/react/express/messanger/client/src/hooks/http.hook.js"],"sourcesContent":["import { useState, useCallback } from \"react\";\n\nexport const useHttp = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const request = useCallback(\n    async (url, method = \"GET\", body = null, headers = {}) => {\n      setLoading(true);\n      try {\n        if (body) {\n          body = JSON.stringify(body);\n          headers[\"Content-Type\"] = \"application/JSON\";\n        }\n        const response = await fetch(url, { method, body, headers });\n        const data = await response.json();\n        if (!response.ok) {\n          throw new Error(data.message || \"Something went wrong\");\n        }\n        setLoading(false);\n        return data;\n      } catch (e) {\n        setLoading(false);\n        setError(e.message);\n        throw e;\n      }\n    },\n    []\n  );\n  const clearError = useCallback(() => setError(null), []);\n\n  return { loading, request, error, clearError };\n};\n"],"mappings":"qXAAA,OAASA,QAAT,CAAmBC,WAAnB,KAAsC,OAAtC,CAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CAC3B,cAA8BF,QAAQ,CAAC,KAAD,CAAtC,wCAAOG,OAAP,eAAgBC,UAAhB,eACA,eAA0BJ,QAAQ,CAAC,IAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eACA,GAAMC,QAAO,CAAGN,WAAW,4FACzB,iBAAOO,GAAP,0KAAYC,MAAZ,+CAAqB,KAArB,CAA4BC,IAA5B,+CAAmC,IAAnC,CAAyCC,OAAzC,+CAAmD,EAAnD,CACEP,UAAU,CAAC,IAAD,CAAV,CADF,gBAGI,GAAIM,IAAJ,CAAU,CACRA,IAAI,CAAGE,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAP,CACAC,OAAO,CAAC,cAAD,CAAP,CAA0B,kBAA1B,CACD,CANL,sBAO2BG,MAAK,CAACN,GAAD,CAAM,CAAEC,MAAM,CAANA,MAAF,CAAUC,IAAI,CAAJA,IAAV,CAAgBC,OAAO,CAAPA,OAAhB,CAAN,CAPhC,QAOUI,QAPV,sCAQuBA,SAAQ,CAACC,IAAT,EARvB,SAQUC,IARV,kBASSF,QAAQ,CAACG,EATlB,+BAUY,IAAIC,MAAJ,CAAUF,IAAI,CAACG,OAAL,EAAgB,sBAA1B,CAVZ,SAYIhB,UAAU,CAAC,KAAD,CAAV,CAZJ,gCAaWa,IAbX,4DAeIb,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,YAAEc,OAAH,CAAR,CAhBJ,uFADyB,+DAqBzB,EArByB,CAA3B,CAuBA,GAAMC,WAAU,CAAGpB,WAAW,CAAC,iBAAMK,SAAQ,CAAC,IAAD,CAAd,EAAD,CAAuB,EAAvB,CAA9B,CAEA,MAAO,CAAEH,OAAO,CAAPA,OAAF,CAAWI,OAAO,CAAPA,OAAX,CAAoBF,KAAK,CAALA,KAApB,CAA2BgB,UAAU,CAAVA,UAA3B,CAAP,CACD,CA7BM"},"metadata":{},"sourceType":"module"}