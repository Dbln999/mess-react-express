{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\express\\\\messanger\\\\client\\\\src\\\\pages\\\\MessagePage.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { Container, Row, InputGroup, Form, Button, Modal } from \"react-bootstrap\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { Messages } from \"./Messages\";\nimport axios from \"axios\";\nimport { useQuery } from 'react-query';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MessagePage = () => {\n  _s2();\n\n  var _s = $RefreshSig$(),\n      _mess$data;\n\n  const {\n    request\n  } = useHttp();\n  const d = new Date();\n  const [form, setForm] = useState({\n    title: \"\",\n    user: \"\",\n    date: d.toLocaleTimeString(\"en-US\", {\n      hour12: false\n    })\n  });\n  const [show, setShow] = useState(true);\n  const [disable, setDisable] = useState(true);\n  const [mess, setMess] = useState([]);\n\n  const changeHandler = event => {\n    setForm({ ...form,\n      [event.target.name]: event.target.value\n    });\n    console.log(form);\n  };\n\n  const getData = useCallback(async () => {\n    let response = await fetch('/chat/get');\n    response = await response.json();\n    setMess(response);\n    console.log(mess);\n  }, []);\n\n  const UserMessages = () => {\n    _s();\n\n    const {\n      isLoading,\n      data\n    } = useQuery('info');\n  };\n\n  _s(UserMessages, \"1zjW8LjbLVySvqo7jR/+Tc6m2Js=\", false, function () {\n    return [useQuery];\n  });\n\n  const addMessageHandler = async () => {\n    try {\n      const data = request(\"/chat/new\", \"POST\", { ...form\n      });\n      setForm({\n        title: \"\"\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleDisabled = () => {\n    if (form.user !== \"\") {\n      setDisable(false);\n    }\n  };\n\n  useEffect(() => {\n    handleDisabled();\n  }, [form.user]);\n\n  const hide = () => setShow(false);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-dark\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-light h1 text-center mb-5\",\n      children: \"ANONYMOUS CHAT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: hide,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Enter username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(InputGroup, {\n          className: \"\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"Enter username\",\n            \"aria-label\": \"title\",\n            name: \"user\",\n            \"aria-describedby\": \"basic-addon2\",\n            value: form.user,\n            onChange: changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: hide,\n          disabled: disable,\n          children: \"Save changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      md: \"10\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-light\",\n        children: JSON.stringify(mess)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        md: \"10\",\n        className: \"d-flex flex-column\",\n        children: (_mess$data = mess.data) === null || _mess$data === void 0 ? void 0 : _mess$data.map(msg => {\n          return /*#__PURE__*/_jsxDEV(Messages, {\n            form: form,\n            messages: msg\n          }, msg._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 20\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"d-flex flex-row position-fixed bottom-0 w-75 mb-1\",\n        children: /*#__PURE__*/_jsxDEV(InputGroup, {\n          className: \"formCont\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"Enter message\",\n            \"aria-label\": \"title\",\n            name: \"title\",\n            \"aria-describedby\": \"basic-addon2\",\n            value: form.title,\n            onChange: changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            className: \"mx\",\n            onClick: addMessageHandler,\n            children: \"Enter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(MessagePage, \"6V3J5OXE9oLounCTGQu9JiFicOA=\", false, function () {\n  return [useHttp];\n});\n\n_c = MessagePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MessagePage\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","Container","Row","InputGroup","Form","Button","Modal","useHttp","Messages","axios","useQuery","MessagePage","request","d","Date","form","setForm","title","user","date","toLocaleTimeString","hour12","show","setShow","disable","setDisable","mess","setMess","changeHandler","event","target","name","value","console","log","getData","response","fetch","json","UserMessages","isLoading","data","addMessageHandler","e","handleDisabled","hide","JSON","stringify","map","msg","_id"],"sources":["C:/react/express/messanger/client/src/pages/MessagePage.js"],"sourcesContent":["import React, {useCallback, useEffect, useState} from \"react\";\nimport {\n  Container,\n  Row,\n  InputGroup,\n  Form,\n  Button,\n  Modal,\n} from \"react-bootstrap\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { Messages } from \"./Messages\";\nimport axios from \"axios\";\nimport {useQuery} from 'react-query'\n\nexport const MessagePage = () => {\n  const { request } = useHttp();\n  const d = new Date();\n  const [form, setForm] = useState({\n    title: \"\",\n    user: \"\",\n    date: d.toLocaleTimeString(\"en-US\", { hour12: false }),\n  });\n  const [show, setShow] = useState(true);\n  const [disable, setDisable] = useState(true);\n  const [mess, setMess] = useState([]);\n\n  const changeHandler = (event) => {\n    setForm({ ...form, [event.target.name]: event.target.value });\n    console.log(form);\n  };\n\n  const getData = useCallback (async () => {\n    let response = await fetch('/chat/get')\n    response = await response.json()\n    setMess(response)\n    console.log(mess)\n  },[]);\n\n  const UserMessages = () => {\n    const {isLoading, data} = useQuery(\n        'info',\n        \n    )\n  }\n\n  const addMessageHandler = async () => {\n    try {\n      const data = request(\"/chat/new\", \"POST\", { ...form });\n      setForm({ title: \"\" });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleDisabled = () => {\n    if (form.user !== \"\") {\n      setDisable(false);\n    }\n  };\n\n  useEffect(() => {\n    handleDisabled();\n  }, [form.user]);\n\n\n  const hide = () => setShow(false);\n\n  return (\n    <div className=\"bg-dark\">\n      <div className=\"text-light h1 text-center mb-5\">ANONYMOUS CHAT</div>\n      <Modal show={show} onHide={hide}>\n        <Modal.Header>\n          <Modal.Title>Enter username</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <InputGroup className=\"\">\n            <Form.Control\n              placeholder=\"Enter username\"\n              aria-label=\"title\"\n              name=\"user\"\n              aria-describedby=\"basic-addon2\"\n              value={form.user}\n              onChange={changeHandler}\n            />\n          </InputGroup>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={hide} disabled={disable}>\n            Save changes\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Container md={\"10\"}>\n        <p className='text-light'>{JSON.stringify(mess)}</p>\n\n        <Row md=\"10\" className=\"d-flex flex-column\">\n          {mess.data?.map((msg) => {\n            return <Messages key={msg._id} form={form} messages={msg} />;\n          })}\n        </Row>\n        <Row className=\"d-flex flex-row position-fixed bottom-0 w-75 mb-1\">\n          <InputGroup className={\"formCont\"}>\n            <Form.Control\n              placeholder=\"Enter message\"\n              aria-label=\"title\"\n              name=\"title\"\n              aria-describedby=\"basic-addon2\"\n              value={form.title}\n              onChange={changeHandler}\n            />\n            <Button\n              variant=\"primary\"\n              className=\"mx\"\n              onClick={addMessageHandler}\n            >\n              Enter\n            </Button>\n          </InputGroup>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}